(this["webpackJsonpjava-microservices-view"]=this["webpackJsonpjava-microservices-view"]||[]).push([[0],{128:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(12),c=a.n(i),o=(a(76),a(77),a(78),a(79),a(80),a(81),a(14)),s=a(15),l=a(17),m=a(16),p=a(18),u=a(9),d=a(35),h=a(23),f=a.n(h),b=a(36),g=a(33),v=a.n(g),y=function(e,t,a){return function(){var n=Object(b.a)(f.a.mark((function n(r){var i,c,o;return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(c=localStorage.getItem("".concat(e,":").concat(t)))){n.next=5;break}i=JSON.parse(c),n.next=10;break;case 5:return n.next=7,v.a.get("https://cors-anywhere.herokuapp.com/".concat(a)).catch((function(e){return v.a.get("https://api.allorigins.win/get?url="+encodeURIComponent(a))}));case 7:o=n.sent,i=o.data.contents?JSON.parse(o.data.contents):o.data,localStorage.setItem("".concat(e,":").concat(t),JSON.stringify(i));case 10:r({type:"LOAD_METRICS",payload:i});case 11:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},E=v.a.create({baseURL:"https://raw.githubusercontent.com/paslavsky/java-microservices/master/docs/"}),O=a(28),j=a(20),C=a(30),k=a(32),x=a(22),w=a(3),T=a.n(w),N=a(7),M=a(25),S=a(57),A=a(31),R=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"shouldComponentUpdate",value:function(e,t,a){return this.changeType=!1,this.props.chartType!==e.chartType?(this.changeType=!0,!0):!T.a.isEqual(this.props,e)}},{key:"setChartRef",value:function(e){this.changeType&&e&&e.reinit(),this.chart=e,this.changeType=!1}},{key:"render",value:function(){var e=this.props,t=e.first,a=e.title,n=e.chartType,i=e.data,c=e.samples;return r.a.createElement(N.Card,{title:a,style:{marginTop:t?"0":"3em"}},r.a.createElement(A.Chart,{type:n||"bar",data:function(e,t){return(e=T.a.clone(e)).datasets=e.datasets.filter((function(e){return T.a.find(t,(function(t){return t.name===e.label}))})),e}(i,c),ref:this.setChartRef.bind(this)}))}}]),t}(r.a.Component),D=a(58),L=a(59),_=a(21),B=a(40),I=a.n(B),W=a(60),q=function(e){var t=[];return T.a.flatMap(e.samples,(function(e){return e.tags})).forEach((function(e){var a=T.a.find(t,{value:e});a||(a={value:e,count:0},t.push(a)),a.count+=1})),r.a.createElement(N.Card,{style:{width:"280px",marginTop:"10px"}},r.a.createElement(W.TagCloud,{minSize:12,maxSize:35,tags:t}))},U=Object(u.b)((function(e){var t=function(e){return e.reduce((function(e,t){return e+t}),0)/e.length},a=function(e){return[t(e),Math.max.apply(Math,Object(k.a)(e)),Math.min.apply(Math,Object(k.a)(e))]},n=T.a.zipObject(e.metrics.map((function(e){return e.name})),e.metrics.map((function(){return I()()})));return{samples:e.metrics.map((function(e){return{name:e.name,tags:e.tags}})),tags:T.a.uniq(T.a.flatMap(e.metrics.map((function(e){return e.tags})))),uptime:{labels:["Avg","Max","Min"],datasets:e.metrics.map((function(e){return{label:e.name,backgroundColor:n[e.name],data:a(e.metrics.map((function(e){return e.uptime})))}}))},memoryOnStart:{labels:["Avg","Max","Min"],datasets:e.metrics.map((function(e){return{label:e.name,backgroundColor:n[e.name],data:a(e.metrics.map((function(e){return e.memoryOnStart/1024})))}}))},warmingUp:{labels:["Avg","Max","Min"],datasets:e.metrics.map((function(e){return{label:e.name,backgroundColor:n[e.name],data:a(e.metrics.map((function(e){return e.requestTime[0]-t(T.a.tail(e.requestTime))})))}}))},requestTime:{labels:["Avg","Max","Min"],datasets:e.metrics.map((function(e){return{label:e.name,backgroundColor:n[e.name],data:a(e.metrics.flatMap((function(e){return T.a.tail(e.requestTime)})))}}))},memoryOnWork:{labels:["Avg","Max","Min"],datasets:e.metrics.map((function(e){return{label:e.name,backgroundColor:n[e.name],data:a(e.metrics.flatMap((function(e){return e.memory})).map((function(e){return e/1024})))}}))}}}))((function(e){var t=Object(n.useState)("bar"),a=Object(x.a)(t,2),i=a[0],c=a[1],o=Object(n.useState)(null),s=Object(x.a)(o,2),l=s[0],m=s[1],p=Object(n.useState)(e.samples),u=Object(x.a)(p,2),d=u[0],h=u[1],f=Object(n.useState)(null),b=Object(x.a)(f,2),g=b[0],v=b[1];return r.a.createElement("div",{className:"p-grid"},r.a.createElement("div",{className:"p-sm-12 p-md-12 p-lg-4 p-xl-3",style:{paddingTop:"5em"}},r.a.createElement("div",{className:"p-grid p-justify-around"},r.a.createElement(N.Card,{style:{width:"280px"}},r.a.createElement("div",{className:"p-grid p-dir-col"},r.a.createElement("div",{className:"p-col"},r.a.createElement(S.SelectButton,{value:i,options:[{label:"Vertical Bar",value:"bar"},{label:"Horizontal Bar",value:"horizontalBar"}],onChange:function(e){return c(e.value)}})),r.a.createElement("div",{className:"p-col"},r.a.createElement(D.AutoComplete,{value:l,suggestions:g,completeMethod:function(t){setTimeout((function(){var a=e.tags.filter((function(e){return e.toLowerCase().indexOf(t.query.toLowerCase())>=0}));v(a)}),250)},minLength:1,placeholder:"Tags",multiple:!0,className:"tags-search",onChange:function(t){var a=t.value;m(a),a.length>0&&h(e.samples.filter((function(e){return T.a.intersection(e.tags,a).length>0})))}})),r.a.createElement("div",{className:"p-col"},r.a.createElement(L.ListBox,{value:d,options:e.samples,className:"samples-list",onChange:function(e){return h(e.value)},filter:!0,multiple:!0,optionLabel:"name",itemTemplate:function(e){var t=d.find((function(t){return t.name===e.name}))?"mdi mdi-checkbox-marked-outline mdi-18":"mdi mdi-checkbox-blank-outline mdi-18";return r.a.createElement("span",null,r.a.createElement("i",{className:t,style:{paddingRight:"5px"}}),e.name)}}),r.a.createElement("div",{className:"p-grid app-tools"},r.a.createElement("div",{className:"p-col"},r.a.createElement(_.Button,{label:"Select All",className:"p-button-raised p-button-secondary",onClick:function(){return h(e.samples)}})),r.a.createElement("div",{className:"p-col"},r.a.createElement(_.Button,{label:"Clear All",className:"p-button-raised p-button-secondary",onClick:function(){return h([])}})))))),r.a.createElement(q,{samples:e.samples}))),r.a.createElement("div",{className:"p-sm-12 p-md-12 p-lg-8 p-xl-6"},r.a.createElement(M.ScrollPanel,{style:{width:"100%",height:"calc(100vh - 5.1em)",paddingTop:"4.6em"}},r.a.createElement(R,{title:"Memory on start (Mb)",chartType:i,data:e.memoryOnStart,first:!0,samples:d}),r.a.createElement(R,{title:"Working memory (Mb)",chartType:i,data:e.memoryOnWork,samples:d}),r.a.createElement(R,{title:"Uptime (ms)",chartType:i,data:e.uptime,samples:d}),r.a.createElement(R,{title:"Warming up (ms)",chartType:i,data:e.warmingUp,samples:d}),r.a.createElement(R,{title:"Request time (ms)",chartType:i,data:e.requestTime,samples:d}))))})),P=a(61),z=a(62),G=a(63),H=Object(u.b)((function(e){return{ghRelease:e.ghRelease,samples:e.metrics.map((function(e){return{name:e.name,version:e.version}}))}}))((function(e){var t=Object(n.useState)(!1),a=Object(x.a)(t,2),i=a[0],c=a[1],o=Object(j.f)(),s=function(e){return function(){o.push(e)}},l=[{label:"Dashboard",icon:"mdi pi-fw mdi-view-dashboard",command:s("/")}].concat(Object(k.a)(e.samples.map((function(e){return{label:"".concat(e.name," v").concat(e.version),command:s("/".concat(e.name)),icon:"pi pi-fw pi-angle-right"}}))));return r.a.createElement(r.a.Fragment,null,r.a.createElement(P.Toolbar,{style:{position:"fixed",top:1,width:"calc(100% - 2px)",left:1,zIndex:1e3}},r.a.createElement("div",{className:"p-toolbar-group-left"},r.a.createElement(_.Button,{icon:"mdi mdi-24 mdi-menu",className:"p-button-secondary",style:{marginRight:".25em"},onClick:function(){return c(!0)}}),r.a.createElement("label",{className:"app-title"},"Microservices in Java World")),r.a.createElement("div",{className:"p-toolbar-group-right"},r.a.createElement(_.Button,{icon:"mdi mdi-24 mdi-help",className:"p-button-secondary",style:{marginRight:".25em"},onClick:s("/docs/index.md")}),r.a.createElement(_.Button,{icon:"mdi mdi-24 mdi-github-circle",className:"p-button-secondary",onClick:function(){return window.open("https://github.com/paslavsky/java-microservices/")}}))),r.a.createElement(z.Sidebar,{visible:i,onHide:function(e){return c(!1)},showCloseIcon:!1},r.a.createElement(G.Menu,{style:{width:"100%",border:"none"},model:l})))})),J=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.props.sample||this.props.history.push("/404")}},{key:"render",value:function(){return r.a.createElement("div",{className:"p-grid"},r.a.createElement("div",{className:"p-sm-12 p-md-12 p-lg-4 p-xl-3",style:{paddingTop:"5em"}},r.a.createElement("div",{className:"p-grid p-justify-around"},r.a.createElement(N.Card,{style:{width:"280px"},title:this.props.sample.name+" v."+this.props.sample.version,subTitle:this.props.sample.description},r.a.createElement("h3",null,"Tags"),r.a.createElement("ul",null,this.props.sample.tags.map((function(e){return r.a.createElement("li",{key:e},e)})))))),r.a.createElement("div",{className:"p-sm-12 p-md-12 p-lg-8 p-xl-6"},r.a.createElement(M.ScrollPanel,{style:{width:"100%",height:"calc(100vh - 5.1em)",paddingTop:"4.6em"}},r.a.createElement(N.Card,{title:"Uptime vs Warming up"},r.a.createElement(A.Chart,{type:"line",data:this.props.uptimeAndWarming,options:this.props.uptimeAndWarmingOpts})),this.props.runs.map((function(e){return r.a.createElement(N.Card,{title:e.title,key:e.title,style:{marginTop:"3em"}},r.a.createElement(A.Chart,{type:"bar",data:e.data,options:e.options}))})))))}}]),t}(n.Component),F=Object(u.b)((function(e,t){var a=e.metrics.find((function(e){return e.name===t.match.params.sample}));return{sample:a,uptimeAndWarming:{labels:a.metrics.map((function(e,t){return"Run ".concat(t+1)})),datasets:[{label:"Uptime (ms)",yAxisID:"Uptime",data:a.metrics.map((function(e){return e.uptime})),fill:!1,backgroundColor:"#4e8bba",borderColor:"#4e8bba"},{label:"Warming up (ms)",yAxisID:"Warming",data:a.metrics.map((function(e){return e.requestTime[0]-(t=T.a.tail(e.requestTime)).reduce((function(e,t){return e+t}),0)/t.length;var t})),fill:!1,backgroundColor:"#a4f77b",borderColor:"#a4f77b"}]},uptimeAndWarmingOpts:{scales:{yAxes:[{id:"Uptime",type:"linear",position:"left",labelString:"Mb"},{id:"Warming",type:"linear",position:"right",labelString:"Mb"}]}},runs:a.metrics.map((function(e,t){return{title:"Run ".concat(t+1),data:{labels:e.memory.map((function(e,t){return t})),datasets:[{label:"Memory (mb)",yAxisID:"MB",data:e.memory.map((function(e){return e/1024})),fill:!1,backgroundColor:"#92afe5",borderColor:"#92afe5",type:"line"},{label:"Request time (ms)",yAxisID:"MS",data:e.requestTime,fill:!1,backgroundColor:"#c6515b",borderColor:"#c6515b",type:"bar"}]},options:{scales:{yAxes:[{id:"MB",type:"linear",position:"left",labelString:"Mb"},{id:"MS",type:"linear",position:"right",labelString:"Ms"}]}}}}))}}))(J);var V=function(){return r.a.createElement("h1",{className:"app404"},r.a.createElement("span",{className:"mdi mdi-power-plug-off"}),"Not found")},X=a(44),$=function(e){return r.a.createElement(O.b,{to:e.href},e.title||e.children)},K=a(26),Q=a.n(K),Y=a(66),Z=a.n(Y),ee=a(67),te=a.n(ee),ae=a(68),ne=a.n(ae),re=a(69),ie=a.n(re),ce=(a(127),function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.fetch(),Q.a.registerLanguage("json",Z.a),Q.a.registerLanguage("javascript",te.a),Q.a.registerLanguage("java",ne.a),Q.a.registerLanguage("sql",ie.a)}},{key:"componentDidUpdate",value:function(e,t,a){this.fetch();var n=!0,r=!1,i=void 0;try{for(var o,s=c.a.findDOMNode(this).getElementsByTagName("pre")[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var l=o.value;Q.a.highlightBlock(l.firstElementChild)}}catch(m){r=!0,i=m}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}}},{key:"fetch",value:function(){this.props.doc?this.props.doc.error&&this.props.history.push("/404"):this.props.fetchDoc(this.props.match.params.doc),this.props.toc?this.props.toc.error&&this.props.history.push("/404"):this.props.fetchDoc("toc.md")}},{key:"render",value:function(){var e={overrides:{a:{component:$}}};return r.a.createElement("div",{className:"p-grid"},r.a.createElement("div",{className:"p-sm-12 p-md-12 p-lg-4 p-xl-3",style:{paddingTop:"5em"}},r.a.createElement("div",{className:"p-grid p-justify-around"},r.a.createElement(N.Card,{style:{width:"280px"}},r.a.createElement("div",{className:"toc-content"},this.props.toc&&this.props.toc.content?r.a.createElement(X.a,{options:e},this.props.toc.content):r.a.createElement(C.ProgressSpinner,null))))),r.a.createElement("div",{className:"p-sm-12 p-md-12 p-lg-8 p-xl-6"},r.a.createElement(M.ScrollPanel,{style:{width:"100%",height:"calc(100vh - 5.1em)",paddingTop:"4.6em"}},r.a.createElement(N.Card,null,r.a.createElement("div",{className:"doc-content"},this.props.doc&&this.props.doc.content?r.a.createElement(X.a,{options:e},this.props.doc.content):r.a.createElement(C.ProgressSpinner,null))))))}}]),t}(r.a.Component)),oe=Object(u.b)((function(e,t){return{doc:e.docs[t.match.params.doc],toc:e.docs["toc.md"]}}),{fetchDoc:function(e){return function(){var t=Object(b.a)(f.a.mark((function t(a){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E.get("/".concat(e)).then((function(e){return{content:e.data}})).catch((function(e){return{error:e}}));case 2:n=t.sent,a({type:"GET_DOC_FILE",payload:Object(d.a)({name:e},n)});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}})(ce),se=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchGitHubRelease()}},{key:"render",value:function(){return this.props.loaded?r.a.createElement(O.a,null,r.a.createElement(H,null),r.a.createElement(j.c,null,r.a.createElement(j.a,{exact:!0,path:"/",component:U}),r.a.createElement(j.a,{exact:!0,path:"/404",component:V}),r.a.createElement(j.a,{exact:!0,path:"/docs/:doc",component:oe}),r.a.createElement(j.a,{exact:!0,path:"/:sample",component:F}))):r.a.createElement(C.ProgressSpinner,null)}}]),t}(r.a.Component),le=Object(u.b)((function(e){return{loaded:!!e.ghRelease&&!!e.metrics}}),{fetchGitHubRelease:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"latest";return(function(){var t=Object(b.a)(f.a.mark((function t(a){var n,r;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.a.get("https://api.github.com/repos/paslavsky/java-microservices/releases/".concat(e));case 2:n=t.sent,a({type:"LOAD_GH_RELEASE",payload:n.data}),r=n.data.assets.find((function(e){return"metrics.json"===e.name})),y(n.data.id,r.id,r.browser_download_url)(a);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}})(se);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var me=a(19),pe=a(70),ue=Object(me.c)({ghRelease:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return"LOAD_GH_RELEASE"===t.type?t.payload:e},metrics:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return"LOAD_METRICS"===t.type?t.payload:e},docs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if("GET_DOC_FILE"===t.type){var a=Object(d.a)({},e);return a[t.payload.name]=t.payload,a}return e}}),de=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||me.d,he=Object(me.e)(ue,de(Object(me.a)(pe.a)));c.a.render(r.a.createElement(u.a,{store:he},r.a.createElement(le,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},71:function(e,t,a){e.exports=a(128)},76:function(e,t,a){}},[[71,1,2]]]);
//# sourceMappingURL=main.2bbc88fc.chunk.js.map