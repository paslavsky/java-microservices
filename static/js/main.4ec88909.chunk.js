(this["webpackJsonpjava-microservices-view"]=this["webpackJsonpjava-microservices-view"]||[]).push([[0],{119:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(14),i=a.n(c),o=(a(68),a(69),a(70),a(71),a(72),a(73),a(18)),s=a(19),l=a(22),m=a(20),u=a(23),p=a(9),d=a(27),h=a.n(d),f=a(36),b=a(29),g=a.n(b),v=function(e,t,a){return function(){var n=Object(f.a)(h.a.mark((function n(r){var c,i,o;return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(i=localStorage.getItem("".concat(e,":").concat(t)))){n.next=5;break}c=JSON.parse(i),n.next=10;break;case 5:return n.next=7,g.a.get("https://cors-anywhere.herokuapp.com/".concat(a)).catch((function(e){return g.a.get("https://api.allorigins.win/get?url="+encodeURIComponent(a))}));case 7:o=n.sent,c=o.data.contents?JSON.parse(o.data.contents):o.data,localStorage.setItem("".concat(e,":").concat(t),JSON.stringify(c));case 10:r({type:"LOAD_METRICS",payload:c});case 11:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},y=a(34),E=a(13),O=a(51),j=a(26),w=a(16),k=a(6),C=a.n(k),x=a(21),T=a(52),N=a(53),M=a(54),S=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(s.a)(t,[{key:"shouldComponentUpdate",value:function(e,t,a){return this.changeType=!1,this.props.chartType!==e.chartType?(this.changeType=!0,!0):!C.a.isEqual(this.props,e)}},{key:"setChartRef",value:function(e){this.changeType&&e&&e.reinit(),this.chart=e,this.changeType=!1}},{key:"render",value:function(){var e=this.props,t=e.first,a=e.title,n=e.chartType,c=e.data,i=e.samples;return r.a.createElement(x.Card,{title:a,style:{marginTop:t?"0":"3em"}},r.a.createElement(M.Chart,{type:n||"bar",data:function(e,t){return(e=C.a.clone(e)).datasets=e.datasets.filter((function(e){return C.a.find(t,(function(t){return t.name===e.label}))})),e}(c,i),ref:this.setChartRef.bind(this)}))}}]),t}(r.a.Component),R=a(55),_=a(56),A=a(15),B=a(33),L=a.n(B),D=a(57),I=function(e){var t=[];return C.a.flatMap(e.samples,(function(e){return e.tags})).forEach((function(e){var a=C.a.find(t,{value:e});a||(a={value:e,count:0},t.push(a)),a.count+=1})),r.a.createElement(x.Card,{style:{width:"280px",marginTop:"10px"}},r.a.createElement(D.TagCloud,{minSize:12,maxSize:35,tags:t}))},q=Object(p.b)((function(e){var t=function(e){return e.reduce((function(e,t){return e+t}),0)/e.length},a=function(e){return[t(e),Math.max.apply(Math,Object(j.a)(e)),Math.min.apply(Math,Object(j.a)(e))]},n=C.a.zipObject(e.metrics.map((function(e){return e.name})),e.metrics.map((function(){return L()()})));return{samples:e.metrics.map((function(e){return{name:e.name,tags:e.tags}})),tags:C.a.uniq(C.a.flatMap(e.metrics.map((function(e){return e.tags})))),uptime:{labels:["Avg","Max","Min"],datasets:e.metrics.map((function(e){return{label:e.name,backgroundColor:n[e.name],data:a(e.metrics.map((function(e){return e.uptime})))}}))},memoryOnStart:{labels:["Avg","Max","Min"],datasets:e.metrics.map((function(e){return{label:e.name,backgroundColor:n[e.name],data:a(e.metrics.map((function(e){return e.memoryOnStart/1024})))}}))},warmingUp:{labels:["Avg","Max","Min"],datasets:e.metrics.map((function(e){return{label:e.name,backgroundColor:n[e.name],data:a(e.metrics.map((function(e){return e.requestTime[0]})))}}))},requestTime:{labels:["Avg","Max","Min"],datasets:e.metrics.map((function(e){return{label:e.name,backgroundColor:n[e.name],data:a(e.metrics.flatMap((function(e){return C.a.tail(e.requestTime)})))}}))},memoryOnWork:{labels:["Avg","Max","Min"],datasets:e.metrics.map((function(e){return{label:e.name,backgroundColor:n[e.name],data:a(e.metrics.flatMap((function(e){return e.memory})).map((function(e){return e/1024})))}}))}}}))((function(e){var t=Object(n.useState)("bar"),a=Object(w.a)(t,2),c=a[0],i=a[1],o=Object(n.useState)(null),s=Object(w.a)(o,2),l=s[0],m=s[1],u=Object(n.useState)(e.samples),p=Object(w.a)(u,2),d=p[0],h=p[1],f=Object(n.useState)(null),b=Object(w.a)(f,2),g=b[0],v=b[1];return r.a.createElement("div",{className:"p-grid"},r.a.createElement("div",{className:"p-sm-12 p-md-12 p-lg-4 p-xl-3",style:{paddingTop:"5em"}},r.a.createElement("div",{className:"p-grid p-justify-around"},r.a.createElement(x.Card,{style:{width:"280px"}},r.a.createElement("div",{className:"p-grid p-dir-col"},r.a.createElement("div",{className:"p-col"},r.a.createElement(N.SelectButton,{value:c,options:[{label:"Vertical Bar",value:"bar"},{label:"Horizontal Bar",value:"horizontalBar"}],onChange:function(e){return i(e.value)}})),r.a.createElement("div",{className:"p-col"},r.a.createElement(R.AutoComplete,{value:l,suggestions:g,completeMethod:function(t){setTimeout((function(){var a=e.tags.filter((function(e){return e.toLowerCase().indexOf(t.query.toLowerCase())>=0}));v(a)}),250)},minLength:1,placeholder:"Tags",multiple:!0,className:"tags-search",onChange:function(t){var a=t.value;m(a),a.length>0&&h(e.samples.filter((function(e){return C.a.intersection(e.tags,a).length>0})))}})),r.a.createElement("div",{className:"p-col"},r.a.createElement(_.ListBox,{value:d,options:e.samples,className:"samples-list",onChange:function(e){return h(e.value)},filter:!0,multiple:!0,optionLabel:"name",itemTemplate:function(e){var t=d.find((function(t){return t.name===e.name}))?"mdi mdi-checkbox-marked-outline mdi-18":"mdi mdi-checkbox-blank-outline mdi-18";return r.a.createElement("span",null,r.a.createElement("i",{className:t,style:{paddingRight:"5px"}}),e.name)}}),r.a.createElement("div",{className:"p-grid app-tools"},r.a.createElement("div",{className:"p-col"},r.a.createElement(A.Button,{label:"Select All",className:"p-button-raised p-button-secondary",onClick:function(){return h(e.samples)}})),r.a.createElement("div",{className:"p-col"},r.a.createElement(A.Button,{label:"Clear All",className:"p-button-raised p-button-secondary",onClick:function(){return h([])}})))))),r.a.createElement(I,{samples:e.samples}))),r.a.createElement("div",{className:"p-sm-12 p-md-12 p-lg-8 p-xl-6"},r.a.createElement(T.ScrollPanel,{style:{width:"100%",height:"calc(100vh - 5.1em)",paddingTop:"5em"}},r.a.createElement(S,{title:"Memory on start (Mb)",chartType:c,data:e.memoryOnStart,first:!0,samples:d}),r.a.createElement(S,{title:"Working memory (Mb)",chartType:c,data:e.memoryOnWork,samples:d}),r.a.createElement(S,{title:"Uptime (ms)",chartType:c,data:e.uptime,samples:d}),r.a.createElement(S,{title:"Warming up (ms)",chartType:c,data:e.warmingUp,samples:d}),r.a.createElement(S,{title:"Request time (ms)",chartType:c,data:e.requestTime,samples:d}))))})),z=a(58),H=a(59),U=a(60),W=Object(p.b)((function(e){return{ghRelease:e.ghRelease,samples:e.metrics.map((function(e){return{name:e.name,version:e.version}}))}}))((function(e){var t=Object(n.useState)(!1),a=Object(w.a)(t,2),c=a[0],i=a[1],o=Object(E.f)(),s=function(e){return function(){o.push(e)}},l=[{label:"Dashboard",icon:"mdi pi-fw mdi-view-dashboard",command:s("/")}].concat(Object(j.a)(e.samples.map((function(e){return{label:"".concat(e.name," v").concat(e.version),command:s("/".concat(e.name)),icon:"pi pi-fw pi-angle-right"}}))));return r.a.createElement(r.a.Fragment,null,r.a.createElement(z.Toolbar,{style:{position:"fixed",top:1,width:"calc(100% - 2px)",left:1,zIndex:1e3}},r.a.createElement("div",{className:"p-toolbar-group-left"},r.a.createElement(A.Button,{icon:"mdi mdi-24 mdi-menu",className:"p-button-secondary",style:{marginRight:".25em"},onClick:function(e){return i(!0)}})),r.a.createElement("div",{className:"p-toolbar-group-right"},r.a.createElement(A.Button,{icon:"mdi mdi-24 mdi-help",className:"p-button-secondary",style:{marginRight:".25em"}}),r.a.createElement(A.Button,{icon:"mdi mdi-24 mdi-github-circle",className:"p-button-secondary"}))),r.a.createElement(H.Sidebar,{visible:c,onHide:function(e){return i(!1)},showCloseIcon:!1},r.a.createElement(U.Menu,{style:{width:"100%",border:"none"},model:l})))})),J=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.props.sample||this.props.history.push("/404")}},{key:"render",value:function(){return r.a.createElement("h1",{style:{paddingTop:"1em"}},"Sample ",this.props.match.params.sample)}}]),t}(n.Component),G=Object(p.b)((function(e,t){return{sample:e.metrics.find((function(e){return e.name===t.match.params.sample}))}}))(J);var P=function(){return r.a.createElement("h1",{className:"app404"},r.a.createElement("span",{className:"mdi mdi-power-plug-off"}),"Not found")},V=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchGitHubRelease()}},{key:"render",value:function(){return this.props.loaded?r.a.createElement(y.a,null,r.a.createElement(W,null),r.a.createElement(E.c,null,r.a.createElement(E.a,{exact:!0,path:"/",component:q}),r.a.createElement(E.a,{exact:!0,path:"/404",component:P}),r.a.createElement(E.a,{exact:!0,path:"/:sample",component:G}))):r.a.createElement(O.ProgressSpinner,null)}}]),t}(r.a.Component),X=Object(p.b)((function(e){return{loaded:!!e.ghRelease&&!!e.metrics}}),{fetchGitHubRelease:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"latest";return(function(){var t=Object(f.a)(h.a.mark((function t(a){var n,r;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g.a.get("https://api.github.com/repos/paslavsky/java-microservices/releases/".concat(e));case 2:n=t.sent,a({type:"LOAD_GH_RELEASE",payload:n.data}),r=n.data.assets.find((function(e){return"metrics.json"===e.name})),v(n.data.id,r.id,r.browser_download_url)(a);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}})(V);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var F=a(12),$=a(62),K=Object(F.c)({ghRelease:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_GH_RELEASE":return t.payload;default:return e}},metrics:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_METRICS":return t.payload;default:return e}}}),Q=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||F.d,Y=Object(F.e)(K,Q(Object(F.a)($.a)));i.a.render(r.a.createElement(p.a,{store:Y},r.a.createElement(X,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},63:function(e,t,a){e.exports=a(119)},68:function(e,t,a){}},[[63,1,2]]]);
//# sourceMappingURL=main.4ec88909.chunk.js.map