(this["webpackJsonpjava-microservices-view"]=this["webpackJsonpjava-microservices-view"]||[]).push([[0],{128:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(20),o=a.n(c),i=(a(76),a(77),a(78),a(79),a(80),a(81),a(13)),s=a(14),l=a(16),m=a(15),u=a(17),p=a(8),d=a(34),h=a(23),f=a.n(h),g=a(35),b=a(31),v=a.n(b),E=function(e,t,a){return function(){var n=Object(g.a)(f.a.mark((function n(r){var c,o,i;return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(o=localStorage.getItem("".concat(e,":").concat(t)))){n.next=5;break}c=JSON.parse(o),n.next=10;break;case 5:return n.next=7,v.a.get("https://cors-anywhere.herokuapp.com/".concat(a)).catch((function(e){return v.a.get("https://api.allorigins.win/get?url="+encodeURIComponent(a))}));case 7:i=n.sent,c=i.data.contents?JSON.parse(i.data.contents):i.data,localStorage.setItem("".concat(e,":").concat(t),JSON.stringify(c));case 10:r({type:"LOAD_METRICS",payload:c});case 11:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},y=v.a.create({baseURL:"https://raw.githubusercontent.com/paslavsky/java-microservices/master/docs/"}),O=a(27),j=a(19),k=a(29),w=a(30),C=a(22),x=a(5),N=a.n(x),T=a(11),S=a(33),M=a(56),L=a(57),R=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(s.a)(t,[{key:"shouldComponentUpdate",value:function(e,t,a){return this.changeType=!1,this.props.chartType!==e.chartType?(this.changeType=!0,!0):!N.a.isEqual(this.props,e)}},{key:"setChartRef",value:function(e){this.changeType&&e&&e.reinit(),this.chart=e,this.changeType=!1}},{key:"render",value:function(){var e=this.props,t=e.first,a=e.title,n=e.chartType,c=e.data,o=e.samples;return r.a.createElement(T.Card,{title:a,style:{marginTop:t?"0":"3em"}},r.a.createElement(L.Chart,{type:n||"bar",data:function(e,t){return(e=N.a.clone(e)).datasets=e.datasets.filter((function(e){return N.a.find(t,(function(t){return t.name===e.label}))})),e}(c,o),ref:this.setChartRef.bind(this)}))}}]),t}(r.a.Component),_=a(58),D=a(59),A=a(21),B=a(39),I=a.n(B),q=a(60),U=function(e){var t=[];return N.a.flatMap(e.samples,(function(e){return e.tags})).forEach((function(e){var a=N.a.find(t,{value:e});a||(a={value:e,count:0},t.push(a)),a.count+=1})),r.a.createElement(T.Card,{style:{width:"280px",marginTop:"10px"}},r.a.createElement(q.TagCloud,{minSize:12,maxSize:35,tags:t}))},H=Object(p.b)((function(e){var t=function(e){return e.reduce((function(e,t){return e+t}),0)/e.length},a=function(e){return[t(e),Math.max.apply(Math,Object(w.a)(e)),Math.min.apply(Math,Object(w.a)(e))]},n=N.a.zipObject(e.metrics.map((function(e){return e.name})),e.metrics.map((function(){return I()()})));return{samples:e.metrics.map((function(e){return{name:e.name,tags:e.tags}})),tags:N.a.uniq(N.a.flatMap(e.metrics.map((function(e){return e.tags})))),uptime:{labels:["Avg","Max","Min"],datasets:e.metrics.map((function(e){return{label:e.name,backgroundColor:n[e.name],data:a(e.metrics.map((function(e){return e.uptime})))}}))},memoryOnStart:{labels:["Avg","Max","Min"],datasets:e.metrics.map((function(e){return{label:e.name,backgroundColor:n[e.name],data:a(e.metrics.map((function(e){return e.memoryOnStart/1024})))}}))},warmingUp:{labels:["Avg","Max","Min"],datasets:e.metrics.map((function(e){return{label:e.name,backgroundColor:n[e.name],data:a(e.metrics.map((function(e){return e.requestTime[0]-t(N.a.tail(e.requestTime))})))}}))},requestTime:{labels:["Avg","Max","Min"],datasets:e.metrics.map((function(e){return{label:e.name,backgroundColor:n[e.name],data:a(e.metrics.flatMap((function(e){return N.a.tail(e.requestTime)})))}}))},memoryOnWork:{labels:["Avg","Max","Min"],datasets:e.metrics.map((function(e){return{label:e.name,backgroundColor:n[e.name],data:a(e.metrics.flatMap((function(e){return e.memory})).map((function(e){return e/1024})))}}))}}}))((function(e){var t=Object(n.useState)("bar"),a=Object(C.a)(t,2),c=a[0],o=a[1],i=Object(n.useState)(null),s=Object(C.a)(i,2),l=s[0],m=s[1],u=Object(n.useState)(e.samples),p=Object(C.a)(u,2),d=p[0],h=p[1],f=Object(n.useState)(null),g=Object(C.a)(f,2),b=g[0],v=g[1];return r.a.createElement("div",{className:"p-grid"},r.a.createElement("div",{className:"p-sm-12 p-md-12 p-lg-4 p-xl-3",style:{paddingTop:"5em"}},r.a.createElement("div",{className:"p-grid p-justify-around"},r.a.createElement(T.Card,{style:{width:"280px"}},r.a.createElement("div",{className:"p-grid p-dir-col"},r.a.createElement("div",{className:"p-col"},r.a.createElement(M.SelectButton,{value:c,options:[{label:"Vertical Bar",value:"bar"},{label:"Horizontal Bar",value:"horizontalBar"}],onChange:function(e){return o(e.value)}})),r.a.createElement("div",{className:"p-col"},r.a.createElement(_.AutoComplete,{value:l,suggestions:b,completeMethod:function(t){setTimeout((function(){var a=e.tags.filter((function(e){return e.toLowerCase().indexOf(t.query.toLowerCase())>=0}));v(a)}),250)},minLength:1,placeholder:"Tags",multiple:!0,className:"tags-search",onChange:function(t){var a=t.value;m(a),a.length>0&&h(e.samples.filter((function(e){return N.a.intersection(e.tags,a).length>0})))}})),r.a.createElement("div",{className:"p-col"},r.a.createElement(D.ListBox,{value:d,options:e.samples,className:"samples-list",onChange:function(e){return h(e.value)},filter:!0,multiple:!0,optionLabel:"name",itemTemplate:function(e){var t=d.find((function(t){return t.name===e.name}))?"mdi mdi-checkbox-marked-outline mdi-18":"mdi mdi-checkbox-blank-outline mdi-18";return r.a.createElement("span",null,r.a.createElement("i",{className:t,style:{paddingRight:"5px"}}),e.name)}}),r.a.createElement("div",{className:"p-grid app-tools"},r.a.createElement("div",{className:"p-col"},r.a.createElement(A.Button,{label:"Select All",className:"p-button-raised p-button-secondary",onClick:function(){return h(e.samples)}})),r.a.createElement("div",{className:"p-col"},r.a.createElement(A.Button,{label:"Clear All",className:"p-button-raised p-button-secondary",onClick:function(){return h([])}})))))),r.a.createElement(U,{samples:e.samples}))),r.a.createElement("div",{className:"p-sm-12 p-md-12 p-lg-8 p-xl-6"},r.a.createElement(S.ScrollPanel,{style:{width:"100%",height:"calc(100vh - 5.1em)",paddingTop:"5em"}},r.a.createElement(R,{title:"Memory on start (Mb)",chartType:c,data:e.memoryOnStart,first:!0,samples:d}),r.a.createElement(R,{title:"Working memory (Mb)",chartType:c,data:e.memoryOnWork,samples:d}),r.a.createElement(R,{title:"Uptime (ms)",chartType:c,data:e.uptime,samples:d}),r.a.createElement(R,{title:"Warming up (ms)",chartType:c,data:e.warmingUp,samples:d}),r.a.createElement(R,{title:"Request time (ms)",chartType:c,data:e.requestTime,samples:d}))))})),W=a(61),z=a(62),G=a(63),J=Object(p.b)((function(e){return{ghRelease:e.ghRelease,samples:e.metrics.map((function(e){return{name:e.name,version:e.version}}))}}))((function(e){var t=Object(n.useState)(!1),a=Object(C.a)(t,2),c=a[0],o=a[1],i=Object(j.f)(),s=function(e){return function(){i.push(e)}},l=[{label:"Dashboard",icon:"mdi pi-fw mdi-view-dashboard",command:s("/")}].concat(Object(w.a)(e.samples.map((function(e){return{label:"".concat(e.name," v").concat(e.version),command:s("/".concat(e.name)),icon:"pi pi-fw pi-angle-right"}}))));return r.a.createElement(r.a.Fragment,null,r.a.createElement(W.Toolbar,{style:{position:"fixed",top:1,width:"calc(100% - 2px)",left:1,zIndex:1e3}},r.a.createElement("div",{className:"p-toolbar-group-left"},r.a.createElement(A.Button,{icon:"mdi mdi-24 mdi-menu",className:"p-button-secondary",style:{marginRight:".25em"},onClick:function(){return o(!0)}}),r.a.createElement("label",{className:"app-title"},"Microservices in Java World")),r.a.createElement("div",{className:"p-toolbar-group-right"},r.a.createElement(A.Button,{icon:"mdi mdi-24 mdi-help",className:"p-button-secondary",style:{marginRight:".25em"},onClick:s("/docs/index.md")}),r.a.createElement(A.Button,{icon:"mdi mdi-24 mdi-github-circle",className:"p-button-secondary",onClick:function(){return window.open("https://github.com/paslavsky/java-microservices/")}}))),r.a.createElement(z.Sidebar,{visible:c,onHide:function(e){return o(!1)},showCloseIcon:!1},r.a.createElement(G.Menu,{style:{width:"100%",border:"none"},model:l})))})),P=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.props.sample||this.props.history.push("/404")}},{key:"render",value:function(){return r.a.createElement("h1",{style:{paddingTop:"1em"}},"Sample ",this.props.match.params.sample)}}]),t}(n.Component),F=Object(p.b)((function(e,t){return{sample:e.metrics.find((function(e){return e.name===t.match.params.sample}))}}))(P);var V=function(){return r.a.createElement("h1",{className:"app404"},r.a.createElement("span",{className:"mdi mdi-power-plug-off"}),"Not found")},X=a(43),$=function(e){return r.a.createElement(O.b,{to:e.href},e.title||e.children)},K=a(25),Q=a.n(K),Y=a(66),Z=a.n(Y),ee=a(67),te=a.n(ee),ae=a(68),ne=a.n(ae),re=a(69),ce=a.n(re),oe=(a(127),function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.fetch(),Q.a.registerLanguage("json",Z.a),Q.a.registerLanguage("javascript",te.a),Q.a.registerLanguage("java",ne.a),Q.a.registerLanguage("sql",ce.a)}},{key:"componentDidUpdate",value:function(e,t,a){this.fetch(),Q.a.initHighlighting()}},{key:"fetch",value:function(){this.props.doc?this.props.doc.error&&this.props.history.push("/404"):this.props.fetchDoc(this.props.match.params.doc),this.props.toc?this.props.toc.error&&this.props.history.push("/404"):this.props.fetchDoc("toc.md")}},{key:"render",value:function(){var e={overrides:{a:{component:$}}};return r.a.createElement("div",{className:"p-grid"},r.a.createElement("div",{className:"p-sm-12 p-md-12 p-lg-4 p-xl-3",style:{paddingTop:"5em"}},r.a.createElement("div",{className:"p-grid p-justify-around"},r.a.createElement(T.Card,{style:{width:"280px"}},r.a.createElement("div",{className:"toc-content"},this.props.toc&&this.props.toc.content?r.a.createElement(X.a,{options:e},this.props.toc.content):r.a.createElement(k.ProgressSpinner,null))))),r.a.createElement("div",{className:"p-sm-12 p-md-12 p-lg-8 p-xl-6"},r.a.createElement(S.ScrollPanel,{style:{width:"100%",height:"calc(100vh - 5.1em)",paddingTop:"5em"}},r.a.createElement(T.Card,null,r.a.createElement("div",{className:"doc-content"},this.props.doc&&this.props.doc.content?r.a.createElement(X.a,{options:e},this.props.doc.content):r.a.createElement(k.ProgressSpinner,null))))))}}]),t}(r.a.Component)),ie=Object(p.b)((function(e,t){return{doc:e.docs[t.match.params.doc],toc:e.docs["toc.md"]}}),{fetchDoc:function(e){return function(){var t=Object(g.a)(f.a.mark((function t(a){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y.get("/".concat(e)).then((function(e){return{content:e.data}})).catch((function(e){return{error:e}}));case 2:n=t.sent,a({type:"GET_DOC_FILE",payload:Object(d.a)({name:e},n)});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}})(oe),se=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchGitHubRelease()}},{key:"render",value:function(){return this.props.loaded?r.a.createElement(O.a,null,r.a.createElement(J,null),r.a.createElement(j.c,null,r.a.createElement(j.a,{exact:!0,path:"/",component:H}),r.a.createElement(j.a,{exact:!0,path:"/404",component:V}),r.a.createElement(j.a,{exact:!0,path:"/docs/:doc",component:ie}),r.a.createElement(j.a,{exact:!0,path:"/:sample",component:F}))):r.a.createElement(k.ProgressSpinner,null)}}]),t}(r.a.Component),le=Object(p.b)((function(e){return{loaded:!!e.ghRelease&&!!e.metrics}}),{fetchGitHubRelease:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"latest";return(function(){var t=Object(g.a)(f.a.mark((function t(a){var n,r;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.a.get("https://api.github.com/repos/paslavsky/java-microservices/releases/".concat(e));case 2:n=t.sent,a({type:"LOAD_GH_RELEASE",payload:n.data}),r=n.data.assets.find((function(e){return"metrics.json"===e.name})),E(n.data.id,r.id,r.browser_download_url)(a);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}})(se);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var me=a(18),ue=a(70),pe=Object(me.c)({ghRelease:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return"LOAD_GH_RELEASE"===t.type?t.payload:e},metrics:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return"LOAD_METRICS"===t.type?t.payload:e},docs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if("GET_DOC_FILE"===t.type){var a=Object(d.a)({},e);return a[t.payload.name]=t.payload,a}return e}}),de=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||me.d,he=Object(me.e)(pe,de(Object(me.a)(ue.a)));o.a.render(r.a.createElement(p.a,{store:he},r.a.createElement(le,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},71:function(e,t,a){e.exports=a(128)},76:function(e,t,a){}},[[71,1,2]]]);
//# sourceMappingURL=main.f4f1976c.chunk.js.map